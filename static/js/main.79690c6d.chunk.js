(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(t,e,r){},121:function(t,e,r){"use strict";r.r(e);var a=r(56),n=r(15),i=r.n(n),l=r(22),o=r(7),s=r(8),u=r(10),c=r(9),p=r(11),f=r(0),h=r.n(f),m=r(57),v=r.n(m),d=r(30),g=r(4),b=r(58),k=r.n(b),_=r(23),w=r.n(_),y=function(t){function e(){var t,r;Object(o.a)(this,e);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(r=Object(u.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(n)))).handleClick=function(){var t=r.props.currTurn,e=r.props.ownColor;if(t==r.props.ownColor){var a=r.props.boxId.split(""),n=parseInt(a[0]),i=parseInt(a[1]),l=r.props.units[n][i],o=r.props.highlighted,s=r.props.boxSelected;!0===o[n][i]?(r.props.moveUnit(n,i),r.props.socket.emit("move",{prevX:s[1][0],prevY:s[1][1],x:n,y:i,roomID:r.props.roomID})):null!==l&&l.split("_")[0]==e&&r.props.handleSelect(n,i)}},r}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t="box",e=this.props.boxId.split(""),r=parseInt(e[0]),a=parseInt(e[1]);t+=(r+a)%2===0?" white":" black";var n=this.props.units[r][a];if(null!==n){var i=n.split("_")[0];t+=" "+i,t+=" "+n.split("_")[1]}if(this.props.highlighted[r][a]){var l=this.props.currTurn;t+="W"===i&&"B"===l?" highlightedKill":"B"===i&&"W"===l?" highlightedKill":" highlighted"}return h.a.createElement("div",{className:t,onClick:this.handleClick})}}]),e}(f.Component),E=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t="grid ";t+=this.props.currTurn;for(var e=[],r=0;r<8;r++){e.push([]);for(var a=0;a<8;a++){var n=r+""+a;e[r].push(h.a.createElement(y,{units:this.props.units,currTurn:this.props.currTurn,key:n,boxId:n,handleSelect:this.props.handleSelect,highlighted:this.props.highlighted,moveUnit:this.props.moveUnit,ownColor:this.props.ownColor,boxSelected:this.props.boxSelected,socket:this.props.socket,roomID:this.props.roomID}))}}return h.a.createElement("div",{className:t,style:{width:720}},e)}}]),e}(f.Component),S=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(u.a)(this,Object(c.a)(e).call(this))).registerSocketListeners=function(){t.props.socket.on("state",function(e){t.setState({units:e.units,currTurn:e.currTurn}),t.unHighlightAll()}),t.props.socket.on("gameOver",function(e){e.won==t.state.ownColor?alert("You win :)"):alert("You lose :("),document.location.href="/"}),t.props.socket.on("exit",function(t){"Player disconnected"==t.message&&(alert("Apologies. The other player disconnected."),document.location.href="/")})},t.newGame=function(){t.props.socket.emit("getState",{roomID:t.state.roomID})},t.unHighlightAllExcept=function(t,e){var r=Array(8).fill().map(function(){return Array(8).fill(!1)});return r[t][e]=!0,r},t.unHighlightAll=function(){var e=Array(8).fill().map(function(){return Array(8).fill(!1)});t.setState({highlighted:e})},t.handleSelect=function(e,r){var a=W(t.state.highlighted),n=W(t.state.boxSelected);0===n.length&&n.push([e,r]),n.length>1&&n.shift(),n.push([e,r]),t.setState({boxSelected:n}),a=t.unHighlightAllExcept(e,r);var i=t.state.units[e][r].split("_")[1];switch(t.setState({highlighted:a,boxSelected:n}),i){case"Pawn":t.pawn(e,r,a);break;case"Rook":t.rook(e,r,a);break;case"Knight":t.knight(e,r,a);break;case"Bishop":t.bishop(e,r,a);break;case"Queen":t.queen(e,r,a);break;case"King":t.king(e,r,a)}},t.moveUnit=function(e,r){var a=W(t.state.boxSelected),n=W(t.state.units),i=parseInt(a[1][0]),l=parseInt(a[1][1]);if(e!==i||r!==l){a.length>1&&a.shift(),a.push([e,r]);var o=n[i][l],s=n[e][r];if(null!==s&&"King"===s.split("_")[1])return t.newGame(),void t.setState({highlighted:Array(8).fill().map(function(){return Array(8).fill(!1)})});var u=Array(8).fill().map(function(){return Array(8).fill(!1)});n[e][r]=o,n[i][l]=null,t.setState({units:n,boxSelected:a,highlighted:u})}},t.pawn=function(e,r,a){var n=W(t.state.units),i=t.state.currTurn;if("W"===i){if(null===n[e-1][r]&&(a[e-1][r]=!0,6===e&&null===n[e-2][r]&&(a[e-2][r]=!0)),r>0){var l=n[e-1][r-1];if(null!==l)"B"===l.split("_")[0]&&(a[e-1][r-1]=!0)}if(r<7){var o=n[e-1][r+1];if(null!==o)"B"===o.split("_")[0]&&(a[e-1][r+1]=!0)}}if("B"===i){if(null===n[e+1][r]&&(a[e+1][r]=!0,1===e&&null===n[e+2][r]&&(a[e+2][r]=!0)),r>0){var s=n[e+1][r-1];if(null!==s)"W"===s.split("_")[0]&&(a[e+1][r-1]=!0)}if(r<7){var u=n[e+1][r+1];if(null!==u)"W"===u.split("_")[0]&&(a[e+1][r+1]=!0)}}t.setState({highlighted:a})},t.rook=function(e,r,a){var n=W(t.state.units);if("W"===t.state.currTurn){if(e>0)for(var i=e-1;i>=0;i--){var l=n[i][r];if(null!==l){if("B"===(l=l.split("_"))[0]){a[i][r]=!0;break}break}a[i][r]=!0}if(e<7)for(var o=e+1;o<=7;o++){var s=n[o][r];if(null!==s){if("B"===(s=s.split("_"))[0]){a[o][r]=!0;break}break}a[o][r]=!0}if(r>0)for(var u=r-1;u>=0;u--){var c=n[e][u];if(null!==c){if("B"===(c=c.split("_"))[0]){a[e][u]=!0;break}break}a[e][u]=!0}if(r<7)for(var p=r+1;p<=7;p++){var f=n[e][p];if(null!==f){if("B"===(f=f.split("_"))[0]){a[e][p]=!0;break}break}a[e][p]=!0}}else{if(e>0)for(var h=e-1;h>=0;h--){var m=n[h][r];if(null!==m){if("W"===(m=m.split("_"))[0]){a[h][r]=!0;break}break}a[h][r]=!0}if(e<7)for(var v=e+1;v<=7;v++){var d=n[v][r];if(null!==d){if("W"===(d=d.split("_"))[0]){a[v][r]=!0;break}break}a[v][r]=!0}if(r>0)for(var g=r-1;g>=0;g--){var b=n[e][g];if(null!==b){if("W"===(b=b.split("_"))[0]){a[e][g]=!0;break}break}a[e][g]=!0}if(r<7)for(var k=r+1;k<=7;k++){var _=n[e][k];if(null!==_){if("W"===(_=_.split("_"))[0]){a[e][k]=!0;break}break}a[e][k]=!0}}t.setState({highlighted:a})},t.knight=function(e,r,a){var n=W(t.state.units);if("W"===t.state.currTurn){if(e>=2){if(r>=1){var i=n[e-2][r-1];null===i?a[e-2][r-1]=!0:"B"===(i=i.split("_"))[0]&&(a[e-2][r-1]=!0)}if(r<=6){var l=n[e-2][r+1];null===l?a[e-2][r+1]=!0:"B"===(l=l.split("_"))[0]&&(a[e-2][r+1]=!0)}}if(e<=5){if(r>=1){var o=n[e+2][r-1];null===o?a[e+2][r-1]=!0:"B"===(o=o.split("_"))[0]&&(a[e+2][r-1]=!0)}if(r<=6){var s=n[e+2][r+1];null===s?a[e+2][r+1]=!0:"B"===(s=s.split("_"))[0]&&(a[e+2][r+1]=!0)}}if(r>=2){if(e>=1){var u=n[e-1][r-2];null===u?a[e-1][r-2]=!0:"B"===(u=u.split("_"))[0]&&(a[e-1][r-2]=!0)}if(e<=6){var c=n[e+1][r-2];null===c?a[e+1][r-2]=!0:"B"===(c=c.split("_"))[0]&&(a[e+1][r-2]=!0)}}if(r<=5){if(e>=1){var p=n[e-1][r+2];null===p?a[e-1][r+2]=!0:"B"===(p=p.split("_"))[0]&&(a[e-1][r+2]=!0)}if(e<=6){var f=n[e+1][r+2];null===f?a[e+1][r+2]=!0:"B"===(f=f.split("_"))[0]&&(a[e+1][r+2]=!0)}}}else{if(e>=2){if(r>=1){var h=n[e-2][r-1];null===h?a[e-2][r-1]=!0:"W"===(h=h.split("_"))[0]&&(a[e-2][r-1]=!0)}if(r<=6){var m=n[e-2][r+1];null===m?a[e-2][r+1]=!0:"W"===(m=m.split("_"))[0]&&(a[e-2][r+1]=!0)}}if(e<=5){if(r>=1){var v=n[e+2][r-1];null===v?a[e+2][r-1]=!0:"W"===(v=v.split("_"))[0]&&(a[e+2][r-1]=!0)}if(r<=6){var d=n[e+2][r+1];null===d?a[e+2][r+1]=!0:"W"===(d=d.split("_"))[0]&&(a[e+2][r+1]=!0)}}if(r>=2){if(e>=1){var g=n[e-1][r-2];null===g?a[e-1][r-2]=!0:"W"===(g=g.split("_"))[0]&&(a[e-1][r-2]=!0)}if(r<=6){var b=n[e+1][r-2];null===b?a[e+1][r-2]=!0:"W"===(b=b.split("_"))[0]&&(a[e+1][r-2]=!0)}}if(r<=5){if(e>=1){var k=n[e-1][r+2];null===k?a[e-1][r+2]=!0:"W"===(k=k.split("_"))[0]&&(a[e-1][r+2]=!0)}if(e<=6){var _=n[e+1][r+2];null===_?a[e+1][r+2]=!0:"W"===(_=_.split("_"))[0]&&(a[e+1][r+2]=!0)}}}},t.bishop=function(e,r,a){var n=W(t.state.units);if("W"===t.state.currTurn){for(var i=1;i<8;i++)if(e-i>=0&&r+i<=7){var l=n[e-i][r+i];if(null!==l){if("B"===(l=l.split("_"))[0]){a[e-i][r+i]=!0;break}break}a[e-i][r+i]=!0}for(var o=1;o<8;o++)if(e+o<=7&&r+o<=7){var s=n[e+o][r+o];if(null!==s){if("B"===(s=s.split("_"))[0]){a[e+o][r+o]=!0;break}break}a[e+o][r+o]=!0}for(var u=1;u<8;u++)if(e+u<=7&&r-u>=0){var c=n[e+u][r-u];if(null!==c){if("B"===(c=c.split("_"))[0]){a[e+u][r-u]=!0;break}break}a[e+u][r-u]=!0}for(var p=1;p<8;p++)if(e-p>=0&&r-p>=0){var f=n[e-p][r-p];if(null!==f){if("B"===(f=f.split("_"))[0]){a[e-p][r-p]=!0;break}break}a[e-p][r-p]=!0}}else{for(var h=1;h<8;h++)if(e-h>=0&&r+h<=7){var m=n[e-h][r+h];if(null!==m){if("W"===(m=m.split("_"))[0]){a[e-h][r+h]=!0;break}break}a[e-h][r+h]=!0}for(var v=1;v<8;v++)if(e+v<=7&&r+v<=7){var d=n[e+v][r+v];if(null!==d){if("W"===(d=d.split("_"))[0]){a[e+v][r+v]=!0;break}break}a[e+v][r+v]=!0}for(var g=1;g<8;g++)if(e+g<=7&&r-g>=0){var b=n[e+g][r-g];if(null!==b){if("W"===(b=b.split("_"))[0]){a[e+g][r-g]=!0;break}break}a[e+g][r-g]=!0}for(var k=1;k<8;k++)if(e-k>=0&&r-k>=0){var _=n[e-k][r-k];if(null!==_){if("W"===(_=_.split("_"))[0]){a[e-k][r-k]=!0;break}break}a[e-k][r-k]=!0}}t.setState({highlighted:a})},t.king=function(e,r,a){var n=W(t.state.units);if("W"===t.state.currTurn){if(e>=1){var i=n[e-1][r];if(console.log(i),null===i?a[e-1][r]=!0:"B"===(i=i.split("_"))[0]&&(a[e-1][r]=!0),r>=1){var l=n[e-1][r-1];null===l?a[e-1][r-1]=!0:"B"===(l=l.split("_"))[0]&&(a[e-1][r-1]=!0)}if(r<=6){var o=n[e-1][r+1];null===o?a[e-1][r+1]=!0:"B"===(o=o.split("_"))[0]&&(a[e-1][r+1]=!0)}}if(e<=6){var s=n[e+1][r];if(console.log(s),null===s?a[e+1][r]=!0:"B"===(s=s.split("_"))[0]&&(a[e+1][r]=!0),r>=1){var u=n[e+1][r-1];null===u?a[e+1][r-1]=!0:"B"===(u=u.split("_"))[0]&&(a[e+1][r-1]=!0)}if(r<=6){var c=n[e+1][r+1];null===c?a[e+1][r+1]=!0:"B"===(c=c.split("_"))[0]&&(a[e+1][r+1]=!0)}}if(r>=1){var p=n[e][r-1];null===p?a[e][r-1]=!0:"B"===(p=p.split("_"))[0]&&(a[e][r-1]=!0)}if(r<=6){var f=n[e][r+1];null===f?a[e][r+1]=!0:"B"===(f=f.split("_"))[0]&&(a[e][r+1]=!0)}}else{if(e>=1){var h=n[e-1][r];if(console.log(h),null===h?a[e-1][r]=!0:"W"===(h=h.split("_"))[0]&&(a[e-1][r]=!0),r>=1){var m=n[e-1][r-1];null===m?a[e-1][r-1]=!0:"W"===(m=m.split("_"))[0]&&(a[e-1][r-1]=!0)}if(r<=6){var v=n[e-1][r+1];null===v?a[e-1][r+1]=!0:"W"===(v=v.split("_"))[0]&&(a[e-1][r+1]=!0)}}if(e<=6){var d=n[e+1][r];if(console.log(d),null===d?a[e+1][r]=!0:"W"===(d=d.split("_"))[0]&&(a[e+1][r]=!0),r>=1){var g=n[e+1][r-1];null===g?a[e+1][r-1]=!0:"W"===(g=g.split("_"))[0]&&(a[e+1][r-1]=!0)}if(r<=6){var b=n[e+1][r+1];null===b?a[e+1][r+1]=!0:"W"===(b=b.split("_"))[0]&&(a[e+1][r+1]=!0)}}if(r>=1){var k=n[e][r-1];null===k?a[e][r-1]=!0:"W"===(k=k.split("_"))[0]&&(a[e][r-1]=!0)}if(r<=6){var _=n[e][r+1];null===_?a[e][r+1]=!0:"W"===(_=_.split("_"))[0]&&(a[e][r+1]=!0)}}},t.queen=function(e,r,a){t.rook(e,r,a),t.bishop(e,r,a)},t.state={roomID:"",units:Array(8).fill().map(function(){return Array(8).fill(null)}),highlighted:Array(8).fill().map(function(){return Array(8).fill(!1)}),currTurn:"W",ownColor:"",boxSelected:[]},t}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=Object(l.a)(i.a.mark(function t(){var e,r,a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,this.setState({roomID:e}),console.log(this.props.name),r=prompt("Enter the password to join this room"),t.next=6,w.a.post("/joinroom",{password:r,roomID:e,name:this.props.name});case 6:(a=t.sent).data.canJoin&&null!=r?(n=a.data.color,this.setState({ownColor:n}),this.props.socket.emit("joiningRoom",{roomID:e})):document.location.href="/",this.registerSocketListeners(),this.newGame();case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return h.a.createElement(E,{units:this.state.units,currTurn:this.state.currTurn,key:"Grid",handleSelect:this.handleSelect,highlighted:this.state.highlighted,moveUnit:this.moveUnit,ownColor:this.state.ownColor,boxSelected:this.state.boxSelected,socket:this.props.socket,roomID:this.state.roomID})}}]),e}(f.Component);function W(t){return JSON.parse(JSON.stringify(t))}var x=Object(g.e)(S);r(119),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=function(t){function e(){var t,r;Object(o.a)(this,e);for(var n=arguments.length,s=new Array(n),p=0;p<n;p++)s[p]=arguments[p];return(r=Object(u.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(s)))).state={password:"",name:"",rooms:[]},r.interval="",r.socket=k()("http://18.219.83.6:5000/"),r.generateRoom=Object(l.a)(i.a.mark(function t(){var e,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("/newgame",{name:r.state.name,password:r.state.password});case 2:e=t.sent,a=e.data.roomID,document.location.href="/game/".concat(a);case 5:case"end":return t.stop()}},t)})),r.handleChange=function(t){return r.setState(Object(a.a)({},t.target.name,t.target.value))},r.joinRoom=function(t){console.log(r.state),document.location.href="/game/".concat(t.roomId)},r}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.socket.on("listOfRooms",function(e){t.setState({rooms:e})})}},{key:"render",value:function(){for(var t=this,e=[],r=function(r){var a=t.state.rooms[r];e.push(h.a.createElement("tr",null,h.a.createElement("td",null,a.players),h.a.createElement("td",null,a.player1.name),h.a.createElement("td",null,a.player2.name),h.a.createElement("td",null,a.passwordProtected?"Yes":"No"),h.a.createElement("td",null,a.players<2?h.a.createElement("button",{onClick:function(){return t.joinRoom(a)}}," ",a.roomId):"Can't. Room Full")))},a=0;a<this.state.rooms.length;a++)r(a);return h.a.createElement(d.a,{basename:"/"},h.a.createElement(g.a,{exact:!0,path:"/"},h.a.createElement("div",{style:{textAlign:"center",marginBottom:"10px"}},h.a.createElement("div",null,h.a.createElement("h1",{style:{color:"white"}},"CHESS")),h.a.createElement("div",null,h.a.createElement("label",{style:{color:"white",margin:"10px"}},"Name"),h.a.createElement("input",{type:"text",style:{margin:"10px"},onChange:function(e){t.setState({name:e.target.value})},name:"name",value:this.state.name}),h.a.createElement("label",{style:{color:"white",margin:"10px"}},"Password"),h.a.createElement("input",{type:"text",style:{margin:"10px"},onChange:this.handleChange,name:"password",value:this.state.password}),h.a.createElement("br",null),h.a.createElement("button",{onClick:this.generateRoom},"Create Room"))),h.a.createElement("div",{style:{color:"white",textAlign:"center"}},h.a.createElement("h1",null,"Rooms available:"),h.a.createElement("table",{align:"center",border:"1",style:{width:"50%"}},h.a.createElement("tr",null,h.a.createElement("th",null,"Players"),h.a.createElement("th",null,"Player 1"),h.a.createElement("th",null,"Player 2"),h.a.createElement("th",null,"Password?"),h.a.createElement("th",null,"Join")),e))),h.a.createElement(g.a,{path:"/game/:id"},h.a.createElement(x,{socket:this.socket,id:!0,name:this.state.name,generateRoom:this.generateRoom})))}}]),e}(h.a.Component);v.a.render(h.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},61:function(t,e,r){t.exports=r(121)},96:function(t,e){}},[[61,2,1]]]);
//# sourceMappingURL=main.79690c6d.chunk.js.map